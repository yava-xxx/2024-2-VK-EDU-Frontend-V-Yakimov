(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();class l{constructor(){this.users={},this.loadFromLocalStorage()}addUser(e,t,r,s,a,i,n){this.users[e]={id:e,lastName:t,firstName:r,patronymic:s,nickname:a,password:i,about:n},this.saveToLocalStorage()}getUser(e){return this.users[e]}getAllUsers(){return Object.values(this.users)}saveToLocalStorage(){localStorage.setItem("userData",JSON.stringify(this.users))}loadFromLocalStorage(){const e=localStorage.getItem("userData");e&&(this.users=JSON.parse(e))}getUserByNickname(e){for(const t in this.users)if(this.users[t].nickname===e)return this.users[t];return null}}let o;localStorage.getItem("userData")?(o=new l,o.loadFromLocalStorage()):(o=new l,o.addUser("1","Иванов","Иван","Иванович","ivan_ivanov","password123","Hello, I am Ivan!"),o.addUser("2","Петров","Петр","Петрович","petr_petrov","password456","Hello, I am Petr!"),o.addUser("3","Баранников","Роман","Романович","rbarannikov","roman","Hello, I am Roma!"));class u{constructor(){this.chats=[],this.loadFromLocalStorage()}addChat(e){const t={id:e,title:"",messages:[],users:[]};return this.chats.push(t),t}getChat(e){return this.chats.find(t=>t.id===e)||null}addMessage(e,t){const r=this.getChat(e);r&&r.messages.push(t)}setTitle(e,t){const r=this.getChat(e);r&&(r.title=t)}addUser(e,t){const r=this.getChat(e);r&&r.users.push(t)}saveToLocalStorage(){localStorage.setItem("chatData",JSON.stringify(this.chats))}loadFromLocalStorage(){const e=localStorage.getItem("chatData");e?this.chats=JSON.parse(e):this.chats=[]}}const h=new u;export{u as C,h as c,o as u};
