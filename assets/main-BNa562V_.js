import{C as o,u as m}from"./chats-3Lt7tHit.js";let e;localStorage.getItem("chatData")?(e=new o,e.loadFromLocalStorage()):(e=new o,[{id:1,messages:[{id:1,text:"Привет!",sentOrReceived:"sent",status:"read",date:"2022-07-25",timestamp:"12:00:00",senderName:"Вы",userId:1,chatId:1},{id:2,text:"Привет!",sentOrReceived:"received",status:"read",date:"2022-07-25",timestamp:"12:01:00",senderName:"Иван Иванов",userId:2,chatId:1}],users:[1,2]},{id:2,messages:[{id:1,text:"Привет!",status:"read",date:"2022-07-25",timestamp:"12:00:00",userId:3,chatId:2},{id:2,text:"Здравствуй!",status:"sent",date:"2022-07-25",timestamp:"12:01:00",userId:1,chatId:2}],users:[1,3]}].forEach(t=>{e.addChat(t.id),t.users.forEach(a=>{e.addUser(t.id,a)}),t.messages.forEach(a=>{e.addMessage(t.id,a)})}));e.saveToLocalStorage();m.loadFromLocalStorage();e.loadFromLocalStorage();const n=document.getElementById("login-form"),d=document.getElementById("error-message");n.addEventListener("submit",r=>{r.preventDefault();const t=document.getElementById("nickname").value,a=document.getElementById("password").value,s=m.getUserByNickname(t);s&&s.password===a?(localStorage.setItem("currentUserId",s.id),window.location.href="messages_page/messenger.html"):(d.textContent="Такого пользователя нет в базе!",d.style.opacity=1,setTimeout(()=>{d.style.opacity=0},3e3))});
