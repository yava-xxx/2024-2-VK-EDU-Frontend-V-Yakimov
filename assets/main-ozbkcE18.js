import{u as m}from"./chats-kHMLDPK4.js";const d=document.getElementById("login-form"),r=document.getElementById("error-message"),u=document.getElementById("registration-form"),y=document.getElementById("register-button"),a=document.getElementById("registration-error-message"),p=document.getElementById("nickname"),f=document.getElementById("password"),s=document.getElementById("welcome-message");function o(e){d.style.display=e?"block":"none",u.style.display=e?"none":"block"}function g(e){r.textContent=e,r.style.opacity=1,setTimeout(()=>{r.style.opacity=0},3e3)}function E(){const e=p.value,n=f.value,t=m.getUserByNickname(e);t&&t.password===n?(localStorage.setItem("currentUserId",t.id),s.style.display="block",s.classList.remove("fade-out"),s.classList.add("fade-in"),setTimeout(()=>{s.classList.remove("fade-in"),s.classList.add("fade-out"),setTimeout(()=>{window.location.href="messages_page/messenger.html",s.style.display="none"},1e3)},3e3)):(g("Такого пользователя нет в базе! Пожалуйста, зарегистрируйтесь."),o(!1))}d.addEventListener("submit",e=>{e.preventDefault(),E()});y.addEventListener("click",e=>{e.preventDefault();const n=document.getElementById("reg-nickname").value,t=document.getElementById("reg-password").value,i=document.getElementById("reg-lastname").value,c=document.getElementById("reg-firstname").value,l=document.getElementById("reg-patronymic").value;if(!n||!t||!i||!c||!l){o(!0),g("Пожалуйста, заполните все поля!");return}if(m.getUser(n)){a.textContent="Пользователь с таким никнеймом уже существует!",a.style.opacity=1,setTimeout(()=>{a.style.opacity=0},3e3);return}m.addUser({lastName:i,firstName:c,patronymic:l,nickname:n,password:t,about:""}),alert("Регистрация прошла успешно! Теперь вы можете войти."),o(!0)});document.getElementById("registration-button").addEventListener("click",e=>{e.preventDefault(),o(!1)});
